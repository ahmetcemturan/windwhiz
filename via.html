<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Untitled Page</title>
<meta name="generator" content="WYSIWYG Web Builder 17 - https://www.wysiwygwebbuilder.com">
<style>
body {
   background-color: #000000;
   color: #FFFFFF;
   font-family: Arial;
   font-weight: normal;
   font-size: 13px;
   line-height: 1.1875;
   margin: 0;
   padding: 0;
}
a {
   color: #87CEEB;
   text-decoration: underline;
}
a:visited {
   color: #DA70D6;
}
a:active {
   color: #FFE4E1;
}
a:hover {
   color: #00BFFF;
   text-decoration: underline;
}
input:focus, textarea:focus, select:focus {
   outline: none;
}
#wb_Text1 {
   background-color: transparent;
   background-image: none;
   border: 0px solid #000000;
   border-radius: 0px;
   padding: 0;
   margin: 0;
   text-align: left;
}
#wb_Text1 div {
   text-align: left;
}
#wb_Text2 {
   background-color: transparent;
   background-image: none;
   border: 0px solid #000000;
   border-radius: 0px;
   padding: 0;
   margin: 0;
   text-align: left;
}
#wb_Text2 div {
   text-align: left;
}
#Table1 {
   border: 2px solid #C0C0C0;
   border-radius: 0px;
   background-color: transparent;
   background-image: none;
   border-collapse: separate;
   border-spacing: 4px;
   margin: 0;
}
#Table1 td {
   padding: 4px 4px 4px 4px;
}
#Table1 td div {
   white-space: nowrap;
}
#Table1 p, #Table1 ul {
   margin: 0;
   padding: 0;
}
#Table1 .cell0 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: bottom;
   width: 500px;
   height: 28px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 20px;
   line-height: 22.5px;
}
#Table1 .cell1 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: bottom;
   height: 28px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 24px;
   line-height: 27.5px;
}
#Table1 .cell2 {
   background-color: #000000;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: bottom;
   width: 500px;
   height: 194px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 181px;
   line-height: 194px;
}
#Table1 .cell3 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: bottom;
   height: 194px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 53px;
   line-height: 59.5px;
}
#Table2 {
   border: 2px solid #C0C0C0;
   border-radius: 0px;
   background-color: transparent;
   background-image: none;
   border-collapse: separate;
   border-spacing: 2px;
   margin: 0;
}
#Table2 td {
   padding: 2px 2px 2px 2px;
}
#Table2 td div {
   white-space: nowrap;
}
#Table2 p, #Table2 ul {
   margin: 0;
   padding: 0;
}
#Table2 .cell0 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: top;
   width: 186px;
   height: 16px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 13px;
   line-height: 16px;
}
#Table2 .cell1 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: top;
   height: 16px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 13px;
   line-height: 16px;
}
#Table2 .cell2 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: top;
   width: 186px;
   height: 18px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 13px;
   line-height: 16px;
}
#Table2 .cell3 {
   background-color: transparent;
   background-image: none;
   border: 1px #C0C0C0 solid;
   text-align: center;
   vertical-align: top;
   height: 18px;
   color: #FFFFFF;
   font-family: Arial;
   font-size: 13px;
   line-height: 16px;
}
</style>
</head>
<body>
<div id="wb_Text1" style="position:absolute;left:16px;top:21px;width:689px;height:36px;z-index:1;">
<span style="color:#FFFFFF;font-family:Arial;font-size:32px;"><strong>Via Kiteboard &amp; Surf Club-Gümüşdere Kilyos </strong></span></div>
<div id="wb_Text2" style="position:absolute;left:16px;top:57px;width:208px;height:21px;z-index:2;">
<span style="color:#87CEEB;font-family:Arial;font-size:19px;">powered by </span><span style="color:#FE00FE;font-family:Arial;font-size:19px;"><strong><a href="http://www.windwhiz.shop" target="_blank">W</a></strong></span><span style="color:#00BFFF;font-family:Arial;font-size:19px;"><strong><a href="http://www.windwhiz.shop" target="_blank">ind</a></strong></span><span style="color:#FE00FE;font-family:Arial;font-size:19px;"><strong><a href="http://www.windwhiz.shop" target="_blank">W</a></strong></span><span style="color:#00BFFF;font-family:Arial;font-size:19px;"><strong><a href="http://www.windwhiz.shop" target="_blank">hiz</a></strong></span></div>
<table style="position:absolute;left:16px;top:90px;width:788px;height:254px;z-index:3;" id="Table1">
<tr>
<td class="cell0"><p style="font-size:13px;line-height:16px;">&nbsp;<span style="font-size:24px;line-height:27.5px;font-weight:bold;">Avg.Wind Speed (kts)</span></p></td>
<td class="cell1"><p style="font-size:13px;line-height:16px;"><span style="font-size:24px;line-height:27.5px;font-weight:bold;">Wind Gust (kts)</span></p></td>
</tr>
<tr>
<td class="cell2" id="avgWindSpeed"><p style="font-weight:bold;">Avg</p></td>
<td class="cell3" id="maxWindGust"><p style="font-size:13px;line-height:16px;">&nbsp;<span style="font-size:75px;line-height:83px;">Max</span></p></td>
</tr>
</table>
<table style="position:absolute;left:16px;top:356px;width:788px;height:54px;z-index:4;" id="Table2">
<tr>
<td class="cell0"><p> Direction</p></td>
<td class="cell0"><p> Temperature </p></td>
<td class="cell0"><p> Humidity</p></td>
<td class="cell1"><p> Barometric Pressure </p></td>
</tr>
<tr>
<td class="cell2" id="windDirection"><p>&nbsp;Dir</p></td>
<td class="cell2" id="temperature"><p>&nbsp;Temp</p></td>
<td class="cell2" id="humidity"><p>&nbsp;Humidity</p></td>
<td class="cell3" id="barometricPressure"><p>&nbsp;Pressure</p></td>
</tr>
</table>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mqtt/5.3.3/mqtt.js"></script>
<script>
const client = mqtt.connect('ws://broker.mqtt-dashboard.com:8000/mqtt');

const windTopic = 'BC:DD:C2:E5:18:E6/wind';
const BMEtopic = 'BC:DD:C2:E5:18:E6/BME';

client.subscribe(windTopic);
client.subscribe(BMEtopic);

client.on('message', (topic, message) => {
  if (topic === windTopic) {
    const data = JSON.parse(message.toString());
    const avrValue = (data.Avr * 1.94384).toFixed(1);
    const maxValue = (data.Max * 1.94384).toFixed(1);
    const dirValue = data.Dir;

    document.getElementById('avgWindSpeed').innerHTML = `
      <p style="font-weight:bold;">${avrValue}</p>
    `;
    document.getElementById('maxWindGust').innerHTML = `
      <p style="font-size:13px;line-height:16px;">&nbsp;<span style="font-size:75px;line-height:83px;">${maxValue}</span></p>
    `;
    document.getElementById('windDirection').innerHTML = `
      <p>${dirValue}&nbsp;&deg</p>
    `;
  } else if (topic === BMEtopic) {
    const BMEdata = JSON.parse(message.toString());
    const humidityValue = BMEdata.Humidity;
    const pressureValue = BMEdata.Pressure;
    const tempValue = BMEdata.Temp;

    document.getElementById('temperature').innerHTML = `
     <p>&nbsp;${tempValue}&nbsp;&deg;C</p>
    `;
    document.getElementById('humidity').innerHTML = `
      <p>&nbsp;${humidityValue}%</p>
    `;
    document.getElementById('barometricPressure').innerHTML = `
      <p>&nbsp;${pressureValue} hPa</p>
    `;
  }
});
</script>
<div id="wb_Text3" style="position:absolute;left:40px;top:425px;width:740px;height:15px;text-align:center;z-index:5;">
<span style="color:#FFFFFF;font-family:Arial;font-size:13px;">It can take up to 1 minute for values to display.&nbsp; After that they are refreshed automatically.&nbsp; Do not refresh the page.</span></div>
</body>
</html>
